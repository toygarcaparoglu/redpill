{{ define "main" }}
<main class="max-w-3xl mx-auto px-4 py-10 space-y-8">
  <h1 class="text-3xl font-bold text-gray-900 mb-4">📚 Blog Yazıları</h1>

  {{ $posts := .Pages.GroupByDate "2006-01-02" }}
  {{ range $posts }}
    <section>
      <h2 class="text-xl font-semibold text-gray-700 mb-2">
        {{ .Key | time.Format "02 Jan 2006" }}
      </h2>

      {{ if eq (.Key | time.Format "2006-01-02") (now.Format "2006-01-02") }}
        <button onclick="document.getElementById('postForm').classList.toggle('hidden')" class="mb-3 text-sm px-3 py-1 rounded bg-blue-600 text-white hover:bg-blue-700">
          ✍ Bugün için post yaz
        </button>
        <div id="postForm" class="hidden mb-6">
          <textarea id="postContent" rows="4" placeholder="Yazını buraya gir..." class="w-full p-2 border border-gray-300 rounded mb-2"></textarea>
          <button onclick="savePost()" class="px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700">
            Kaydet
          </button>
        </div>
      {{ end }}

      <ul class="list-disc ml-6 space-y-1">
        {{ range .Pages }}
          <li>
            <a href="{{ .RelPermalink }}" class="text-blue-600 hover:underline">
              {{ .Title }}
            </a>
          </li>
        {{ end }}
      </ul>
    </section>
  {{ end }}
</main>

<script>
  function savePost() {
    const content = document.getElementById("postContent").value;
    alert("Bu post Hugo'da statik olarak yazı dosyasına kaydedilemez 😢\nAma backend ile entegre edilirse kaydedilebilir.");
  }
</script>
{{ end }}
